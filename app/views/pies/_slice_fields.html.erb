<style>


.pie-name-label {
  font-size: 22px;
  display: block;
  font-weight: bold;
  margin-bottom: 5px;
}



.slice-field {
  border-radius: var(--framed_item-border-radius);
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.slice-field-flex {
  display: flex;
  gap: 15px;
  align-items: end;
}

.slice-label {
  /* font-size: 28px; */
  display: block;
  font-weight: bold;
  margin-bottom: 5px;
}

.slice-name-field {
  padding: 8px;
  border: 1px solid #ccc;
  border-radius: var(--text-input-border-radius);
  width: 200px; 
}
.slice-name-field:hover {

  border-color: var(--focus);

}

.slice-color-field {
  padding: 0px;
  border: none !important;
  border-radius: 0px;
  width: 160px;
  height: 40px;
  background: none !important;
  background-color: transparent !important;
  border-radius: var(--text-input-border-radius);
}


input[type="color"] {
    appearance: none;
    -webkit-appearance: none;
    -moz-appearance: none;
    width: 60px;
    height: 30px;
    cursor: pointer;
    background-color: transparent !important;
    background: none !important;
    border: none !important;
    border-width: 0px !important;
    border-style: none !important;
    border-color: transparent !important;
    padding: 0px;
    outline: none !important;
    box-shadow: none !important;
}

input[type="color"]::-webkit-color-swatch-wrapper {
    padding: 0;
    border: none !important;
    border-radius: 0;
}

input[type="color"]::-webkit-color-swatch {
    border: none !important;
    border-radius: 0;
}



.delete-link-button {
  background: none;
  border: none;
  color: var(--lightgray);
  cursor: pointer;
  margin-left: 8px;
  padding: 4px;
}

.delete-link-button:hover {
  color: #dc3545 !important;
}

/* Uncomment if you use the percentage field
.slice-percentage-field {
  padding: 8px;
  border: 1px solid #ccc;
  border-radius: 4px;
  width: 80px;
}
*/
</style>

<div class="slice-field">
  <%= f.hidden_field :id %>
  <div class="slice-field-flex">
    <div>
      <%= f.label :color, class: "slice-label" %>
      <%= f.color_field :color, class: "slice-color-field", value: f.object.color.presence || "##{SecureRandom.hex(3)}" %>
    </div>
    <div>
      <%= f.label :name, class: "slice-label" %>
      <%= f.text_field :name, class: "slice-name-field" %>
    </div>
    
    <div>
      <%#= f.label :percentage, class: "slice-label" %>
      <%#= f.number_field :percentage, min: 0, max: 100, class: "slice-percentage-field" %>
    </div>
    
    
    <div>
      <%= f.check_box :_destroy, style: "display: none;" %>
      <button type="button" onclick="toggleSliceDestroy(this)" 
              class="delete-link-button">
        <span class="material-symbols-outlined">delete</span>
      </button>
    </div>
  </div>
</div>





<script>
function toggleSliceDestroy(button) {
  var destroyCheckbox = button.parentElement.querySelector('input[type="checkbox"]');
  var sliceField = button.closest('.slice-field');
  var icon = button.querySelector('.material-symbols-outlined');
  
  if (destroyCheckbox.checked) {
    destroyCheckbox.checked = false;
    sliceField.style.opacity = '1';
    icon.textContent = 'delete';
    button.style.color = 'var(--lightgray)';
  } else {
    destroyCheckbox.checked = true;
    sliceField.style.opacity = '0.5';
    icon.textContent = 'undo';
    button.style.color = '#28a745';
  }
}
</script>

<style>
.delete-link-button:hover {
  color: #dc3545 !important;
}
</style>